@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;1,400;1,500&display=swap");
@import "./tokens.css";

* { box-sizing: border-box; }
html, body { height: 100%; }

html {
  background: #ffffff;
  color: var(--text);
  color-scheme: light;
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  color: var(--text);
  background: #ffffff;
}

a { color: inherit; text-decoration: none; }
button { font-family: inherit; }

h1, h2, h3 {
  margin: 0;
  letter-spacing: -0.02em;
}

p { margin: 0; color: var(--muted); line-height: 1.65; }

.section { padding: 72px 24px; }

.feature-bg {
  position: relative;
}

.feature-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.5;
  z-index: -1;
  padding-top: 40px;
}

.kicker {
  font-size: 12px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted-2);
}

.title {
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  font-size: 38px;
  line-height: 1.1;
}

.title-lg {
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  font-size: 46px;
  line-height: 1.1;
}

.feature-main-grid {
  display: grid;
  grid-template-columns: 1.05fr 0.95fr;
  gap: 18px;
  align-items: center;
}

.feature-mockup { height: 420px; }

/* KEEP your original .steps-grid for other sections */
.steps-grid {
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 18px;
  align-items: center;
}

.grid-2x2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
}

.quote {
  font-size: 28px;
  opacity: 0.35;
}

.footer-grid {
  display: grid;
  grid-template-columns: 1.2fr 1fr 1fr;
  gap: 18px;
}

.title-xl {
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  font-size: 40px;
  line-height: 1.05;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  height: 44px;
  padding: 0 16px;
  border-radius: 999px;
  border: 1px solid transparent;
  cursor: pointer;
  transition: 0.2s ease;
  user-select: none;
}

.btn-primary {
  background: var(--brand);
  color: white;
  box-shadow: 0 10px 25px rgba(47, 90, 85, 0.18);
}
.btn-primary:hover { background: var(--brand-2); }

.btn-ghost {
  background: rgba(255,255,255,0.55);
  border-color: var(--border);
}
.btn-ghost:hover { background: rgba(255,255,255,0.8); }

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.65);
  color: var(--muted);
  font-size: 13px;
}

.card {
  background: var(--surface-2);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(8px);
}

.divider {
  height: 1px;
  background: var(--border);
}

.small {
  font-size: 13px;
  color: var(--muted);
}

.container {
  width: 100%;
  max-width: var(--container);
  margin: 0 auto;
  padding: 0 16px;
}

@media (max-width: 920px) {
  .grid-3 { grid-template-columns: 1fr; }
  .grid-2x2 { grid-template-columns: 1fr; }
  .section { padding: 54px 20px; }
}

@media (max-width: 768px) {
  .container { padding: 0 16px; }

  .title { font-size: 28px; }
  .title-lg { font-size: 32px; }
  .title-md { font-size: 24px; }
  .title-xl { font-size: 32px; }

  .feature-main-grid { grid-template-columns: 1fr; gap: 24px; padding: 10px 0; }
  .steps-grid { grid-template-columns: 1fr; gap: 24px; }
  .footer-grid { grid-template-columns: 1fr; gap: 24px; }

  .grid-2x2 { grid-template-columns: 1fr; gap: 12px; }

  .feature-mockup { height: 320px; }

  h2 { font-size: 24px; }
  h3 { font-size: 20px; }

  .section { padding: 36px 16px; }

  .btn {
    height: 40px;
    padding: 0 14px;
    font-size: 14px;
  }

  header { padding: 12px 0; }
  header nav { gap: 12px; }

  .quote { font-size: 24px; }

  footer { padding: 36px 16px 24px; }
}

/* ------------------------------------------------------------------ */
/* Testimonials (clean + fixed cascade so mobile is ALWAYS 2 cards)     */
/* ------------------------------------------------------------------ */

.t-section {
  position: relative;
  padding: 70px 0;
  background: var(--bg);
  overflow: hidden;
}

/* Background image */
.t-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("../assets/Family_Shopping.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: saturate(0.95) contrast(0.98);
  opacity: 0.9;
  z-index: 0;
}

/* Whitish overlay */
.t-section::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.45),
    rgba(255, 255, 255, 0.30)
  );
  z-index: 1;
}

.t-section > * {
  position: relative;
  z-index: 2;
}

.t-viewport {
  touch-action: pan-y; /* allows vertical scroll, we handle horizontal swipe */
}

.t-card:active {
  transform: scale(0.99);
}

/* Header */
.t-header {
  text-align: center;
  margin-bottom: 34px;
}

.t-title { color: var(--text); }
.t-highlight { color: var(--brand); }

.t-subtitle {
  margin-top: 10px;
  color: var(--muted);
}

/* Carousel shell */
.t-shell {
  position: relative;
  max-width: 980px;
  margin: 0 auto;
}

/* Viewport & track */
.t-viewport {
  overflow: hidden;
  border-radius: 20px;
}

.t-track {
  display: flex;
  transition: transform 420ms ease;
  will-change: transform;
}

.t-slide {
  flex: 0 0 100%;
  padding: 10px 6px;
  box-sizing: border-box;
}

/* Grid: desktop defaults to 3 */
.t-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 18px;
  align-items: stretch;
}

/* Card styling */
.t-card {
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.78);
  border: 1px solid rgba(0, 0, 0, 0.06);
  box-shadow: none; /* remove drop shadow */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.t-cardInner {
  position: relative;
  padding: 22px 18px 20px;
  text-align: center;
  height: 100%;
}

.t-avatarWrap {
  width: 58px;
  height: 58px;
  margin: 0 auto 12px;
  border-radius: 999px;
  padding: 3px;
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.08);
}

.t-avatar {
  width: 100%;
  height: 100%;
  border-radius: 999px;
  object-fit: cover;
  display: block;
}

.t-quoteMark {
  position: absolute;
  left: 16px;
  top: 16px;
  font-size: 34px;
  line-height: 1;
  color: rgba(0, 0, 0, 0.18);
  font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
}

.t-quote {
  margin: 8px 0 16px;
  color: var(--text);
  font-size: 16px;
  line-height: 1.6;
}

.t-person {
  margin-top: auto;
}

.t-name {
  font-weight: 700;
  color: var(--text);
  font-size: 14px;
}

.t-role {
  margin-top: 4px;
  color: var(--muted);
  font-size: 12px;
}

.t-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid var(--border);
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.10);
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 3;
}

.t-arrowLeft { left: -56px; }
.t-arrowRight { right: -56px; }

.t-arrow:hover { transform: translateY(-50%) scale(1.03); }

.t-arrow:focus-visible {
  outline: 3px solid rgba(0, 0, 0, 0.16);
  outline-offset: 3px;
}

.t-dots {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 18px;
}

.t-dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  border: none;
  background: rgba(0, 0, 0, 0.12);
  cursor: pointer;
  transition: transform 180ms ease, background 180ms ease;
}

.t-dot.isActive {
  background: var(--brand);
  transform: scale(1.2);
}

@media (max-width: 900px) {
  .t-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* keep arrows inside on smaller screens */
  .t-arrowLeft { left: 8px; }
  .t-arrowRight { right: 8px; }
}

/* Mobile: swap bg + force 2 columns + hide arrows */
@media (max-width: 600px) {
  .t-section::before {
    background-image: url("../assets/MobileView_familyShopping.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }

  /* FORCE 2 cards always on mobile */
  .t-section .t-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 14px;
  }

  .t-arrow { display: none; }
  .t-shell { padding: 0; }
}

/* -------------------- Nav / Mobile Menu -------------------- */
.nav-desktop {
  display: flex;
  align-items: center;
  gap: 16px;
}

.mobile-toggle {
  display: none;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 4px;
  color: var(--text);
  z-index: 102;
}

.mobile-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 0;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  overflow: hidden;
  transition: height 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s ease;
  opacity: 0;
  z-index: 99;
  border-bottom: 1px solid var(--border);
}

.mobile-menu.open {
  height: 100vh;
  opacity: 1;
}

.mobile-nav {
  display: flex;
  flex-direction: column;
  padding-top: 100px;
  gap: 24px;
  font-size: 20px;
  font-weight: 500;
  text-align: center;
}

.mobile-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--border);
}

.mobile-actions .btn {
  width: 100%;
  height: 48px;
}

@media (max-width: 768px) {
  .nav-desktop {
    display: none !important;
  }

  .mobile-toggle {
    display: block;
  }
}
/* ------------------------------ */
/* --- How It Works Section ---   */
/* ------------------------------ */

.hw-section {
  position: relative;
  background: #ffffff;
  /* Ensure section has enough height to show the image nicely */
  min-height: 700px; 
  padding: 100px 0;
  display: flex;
  align-items: center;
  overflow: hidden;
}

/* THE BACKGROUND LAYER 
   This handles the "Full width, text overlap" requirement.
*/
.hw-bgLayer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0; /* Sits behind text */
  pointer-events: none; /* Allows clicking text even if image overlaps */
}

.hw-fullImage {
  width: 100%;
  height: 100%;
  
  /* CRITICAL: 
     'cover' ensures full width/height fill.
     'right center' ensures the PHONE is never cut off. 
     The left side (blurred store) will crop automatically based on screen size, 
     which is fine because the text covers it.
  */
  object-fit: cover;
  object-position: right center; 
  display: block;
  
  /* Optional: Fade in effect */
  opacity: 1; 
}

/* THE CONTENT LAYER
*/
.hw-container-relative {
  position: relative;
  z-index: 2; /* Sits ON TOP of the image */
  width: 100%;
}

.hw-content {
  /* Limit text to the left half so it overlaps the blurred part of the image 
     but doesn't cover the phone on the right. */
  max-width: 50%; 
  display: flex;
  flex-direction: column;
}

/* Typography & Steps (Same as before) */
.hw-header {
  margin-bottom: 56px;
  text-align: left;
}

.mb-4 { margin-bottom: 16px; }

.hw-mainTitle {
  margin-bottom: 20px;
  color: var(--text);
  font-size: 44px;
  line-height: 1.15;
}

.hw-titleSerif {
  font-family: "Playfair Display", serif;
  color: var(--brand);
  font-style: italic;
  font-weight: 500;
  position: relative;
  display: inline-block;
}

.hw-titleSerif::after {
  content: "";
  position: absolute;
  bottom: 4px;
  left: 0;
  width: 100%;
  height: 8px;
  background: rgba(47, 90, 85, 0.1);
  z-index: -1;
  transform: skew(-12deg);
}

.hw-subtitle {
  font-size: 18px;
  color: var(--muted);
  max-width: 460px;
  line-height: 1.7;
}

/* Step Cards */
.hw-stepsList {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.hw-stepCard {
  display: flex;
  align-items: flex-start;
  gap: 24px;
  padding: 24px;
  border-radius: 16px;
  /* Add a slight background blur to ensure text readability over the image */
  background: rgba(255, 255, 255, 0.6); 
  backdrop-filter: blur(5px); 
  border: 1px solid rgba(255, 255, 255, 0.5);
  transition: all 0.3s ease;
}

.hw-stepCard:hover {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(0, 0, 0, 0.04);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.03);
  transform: translateX(10px);
}

/* Number Column */
.hw-stepNumWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  height: 100%;
}

.hw-stepNum {
  flex-shrink: 0;
  width: 48px;
  height: 48px;
  background-color: white;
  border: 2px solid var(--border);
  color: var(--text);
  border-radius: 50%;
  display: grid;
  place-items: center;
  font-weight: 700;
  font-size: 18px;
  transition: 0.3s ease;
  z-index: 2;
}

.hw-stepCard:hover .hw-stepNum {
  background-color: var(--brand);
  border-color: var(--brand);
  color: white;
  box-shadow: 0 4px 12px rgba(47, 90, 85, 0.3);
}

.hw-connector {
  width: 2px;
  flex-grow: 1;
  background: var(--border);
  opacity: 0.4;
  min-height: 20px;
}

.hw-stepCard:last-child .hw-connector { display: none; }

.hw-stepContent { padding-top: 8px; }
.hw-stepTitle { font-size: 20px; font-weight: 600; color: var(--text); margin-bottom: 8px; }
.hw-stepDesc { font-size: 16px; color: var(--muted); line-height: 1.6; }

/* -------------------- */
/* --- RESPONSIVE ---   */
/* -------------------- */

@media (max-width: 960px) {
  .hw-section {
    padding: 60px 0;
    min-height: auto;
    /* On tablet/mobile, we might want to stack them if the text is hard to read */
    flex-direction: column;
  }
  
  .hw-content {
    max-width: 65%; /* Give text a bit more room on tablet */
  }
}

@media (max-width: 768px) {
  .hw-section {
    /* Reset layout for mobile to stack normally */
    display: block;
    padding: 0 0 60px 0;
  }

  /* On mobile, the "left-to-right" image concept doesn't work well 
     because the screen is vertical. We move the image to the top 
     so the phone is visible, then text below.
  */
  .hw-bgLayer {
    position: relative;
    height: 400px; /* Visible height of image on mobile */
    margin-bottom: -50px; /* Pull text up slightly */
  }

  .hw-fullImage {
    object-position: center bottom; /* Focus on the phone part */
  }

  .hw-content {
    max-width: 100%;
    padding: 24px;
    background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, #fff 100px);
  }

  .hw-header { 
    text-align: center; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
  }
  
  .hw-stepCard {
    background: #fff; /* Solid background on mobile for readability */
  }
  
  .hw-connector { display: none; }
}